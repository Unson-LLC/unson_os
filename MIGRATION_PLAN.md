# UnsonOS プレイブック駆動型構造への移行計画

## 移行の背景と目標

### 現在の課題
- プロダクト情報が分散（`/products/`, `/services/`, `/src/data/products.ts`）
- ナレッジの再利用が困難
- フェーズ移行の基準が曖昧
- 100-200個のプロダクト管理に対応できない

### 移行後の目標
- **プレイブック駆動型管理**：再現可能な成功パターン
- **データ役割分担**：Git（定義・監査）+ DB（実行・分析）
- **自動化基盤**：Convex/Neon連携による学習サイクル

## 移行ステップ

### Phase 1: 基盤構築（1週間）

#### 1.1 プレイブック定義ディレクトリ作成
```
docs/
└── playbooks/
    ├── pb-001-lp-cvr-test.md
    ├── pb-002-ad-campaign.md
    ├── pb-003-user-interview.md
    └── README.md
```

#### 1.2 新しいproductsディレクトリ構造
```
products/
├── template/                    # テンプレート
│   ├── product.yaml
│   ├── phases/
│   │   └── 01_LP_Validation/
│   │       └── PhaseReview.md
└── active/                      # 実稼働プロダクト
    └── 2024-12-001-mywa/
        ├── product.yaml
        ├── README.md
        └── phases/
```

#### 1.3 データベーススキーマ拡張
- Convex: `playbooks`, `playbook_runs`, `phase_reviews`
- Neon: `insights` (pgvector)

### Phase 2: 既存プロダクト移行（3日）

#### 2.1 現在の5プロダクトを新構造に移行
- AI世代間ブリッジ → `2024-12-002-ai-bridge`
- AI自分時間コーチ → `2024-12-003-ai-coach`
- AIレガシー・クリエーター → `2024-12-004-ai-legacy-creator`
- AIパーソナルスタイリスト → `2024-12-005-ai-stylist`
- わたしコンパス → `2024-11-006-watashi-compass`

#### 2.2 各プロダクトのproduct.yaml作成
- フェーズ履歴の復元
- 現在のKPIスナップショット
- プレイブック実行履歴（推定）

### Phase 3: 自動化・連携（1週間）

#### 3.1 Git → DB 同期CI構築
- Front Matter抽出
- プレイブック埋め込み生成
- Convex/Neonへの自動同期

#### 3.2 ダッシュボード連携
- `/src/data/products.ts`をConvex API経由に変更
- プロダクト管理UIの構築

### Phase 4: 運用開始（継続）

#### 4.1 新規プロダクトはすべて新構造で開始
#### 4.2 プレイブック実行・評価サイクルの確立
#### 4.3 ナレッジフィードバックの自動化

## リスクと対策

### リスク
1. **移行期の混乱**：新旧構造が混在
2. **データ同期の複雑性**：3箇所への分散管理
3. **運用負荷**：プレイブック記録の手間

### 対策
1. **段階的移行**：Phase毎にゲートを設ける
2. **自動化優先**：手動作業を最小限に
3. **テンプレート活用**：記録の標準化

## 成功指標

- [ ] 全プロダクトが新構造で管理される
- [ ] プレイブック成功率が可視化される
- [ ] 新規プロダクトの立ち上げが24時間以内
- [ ] 失敗プロダクトからの学習が自動化される

## 次のアクション

1. プレイブック定義の作成（PB-001～005）
2. テンプレートの整備
3. MyWaプロダクトでの実証実験
4. 段階的な全プロダクト移行