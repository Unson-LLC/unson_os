# Discord ウィジェット設定ガイド

## 概要
メール送信時にDiscordウィジェットが表示されない問題の修正方法

## 必要な設定

### 1. Discord Server IDの取得

#### 方法1: 開発者モードを使用（推奨）
1. Discord設定を開く（歯車アイコン）
2. 詳細設定 → 開発者モード をONにする
3. サーバーリストでサーバー名を右クリック
4. 「IDをコピー」を選択

#### 方法2: ウィジェット設定から確認
1. サーバー設定を開く（サーバー名の横の▼をクリック）
2. 左メニューから「ウィジェット」を選択
3. 「サーバーウィジェットを有効化」をONにする
4. 表示されるServer IDをコピー

#### 方法3: ブラウザ版Discordから確認
1. https://discord.com でサーバーにアクセス
2. URLに含まれる数字がServer ID
   例: `https://discord.com/channels/1234567890123456789/...`
   この場合、`1234567890123456789`がServer ID

### 2. 環境変数の設定
`.env.local`ファイルに以下を追加：

```env
# Discord Server ID（ウィジェット表示用）
DISCORD_SERVER_ID=あなたのサーバーID
```

### 3. Discordサーバー側の設定

#### ウィジェット設定の確認手順
1. Discordを開き、対象のサーバーを選択
2. サーバー名の横の▼をクリック
3. 「サーバー設定」を選択
4. 左側メニューから「ウィジェット」を探す

**注意**: ウィジェット設定が表示されない場合：
- ブラウザ版Discord（https://discord.com）で試す
- 別のブラウザで試す
- ブラウザのキャッシュをクリア

#### ウィジェットの有効化
1. 「サーバーウィジェットを有効化」のトグルをONにする
2. 「招待チャンネル」を選択（通常は #general や #welcome）
3. 変更を保存

#### ウィジェットが機能しない場合の対処法
- サーバーの権限設定を確認
- ブラウザを変更して試す
- Discordアプリを最新版に更新
- コミュニティ設定から確認する場合もある

## 動作確認
1. Discord参加申請フォームから申請
2. 受信したメールでウィジェットが表示されることを確認
3. ウィジェットから「接続」ボタンでDiscordに参加できることを確認

## トラブルシューティング
- ウィジェットが表示されない場合：Discordサーバーのウィジェット設定を確認
- 「このサーバーに参加できません」エラー：招待チャンネルの権限設定を確認